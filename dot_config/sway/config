include $XDG_CONFIG_HOME/sway/sway.d/*

set $term --no-startup-id $TERMINAL
set $mod Mod4

default_border pixel 2
default_floating_border pixel 2
floating_modifier $mod
smart_borders on
smart_gaps on

# Then I have a window running R I use for basic arithmetic
# I'll later bind this to mod+a.
for_window [title="dropdowncalc"] move scratchpad; mark dropdowncalc
for_window [con_mark="dropdowncalc"] floating enable
for_window [con_mark="dropdowncalc"] resize set 800 300
for_window [con_mark="dropdowncalc"] border pixel 2
for_window [con_mark="dropdowncalc"] sticky enable

for_window [class=ffplay] floating enable

# Inhibit Idle if a window is fullscreen
for_window [class="^.*"] inhibit_idle fullscreen
for_window [app_id="^.*"] inhibit_idle fullscreen

# Setting the background:
output "*" background ~/.config/wall.png fill

exec --no-startup-id swaync

# Toggle control center
bindsym $mod+n exec swaync-client -t -sw

# Disable the laptop screen when the lid is closed.
#bindswitch --reload --locked lid:on output eDP-1 disable
#bindswitch --reload --locked lid:off output eDP-1 enable

#exec --no-startup-id swayidle -w \
#                timeout 270 'sudo light -U 10' \
#                timeout 300 'lockscreen' \
#                timeout 600 'swaymsg "output * dpms off"' \
#                     resume 'swaymsg "output * dpms on"' \
#                before-sleep 'lockscreen' \
#                after-resume 'sudo light -A 10'

# Input settings
input 1:1:AT_Translated_Set_2_keyboard {
  repeat_delay 300
  repeat_rate 40
  xkb_layout us
  xkb_variant altgr-intl
  xkb_options shift:both_capslock,caps:escape
}

input 1241:5890:USB_Keyboard {
  repeat_delay 300
  repeat_rate 40
  xkb_layout us
  xkb_variant altgr-intl
  xkb_options shift:both_capslock,caps:escape
}

input 6940:6966:Corsair_Corsair_Gaming_K70_LUX_Keyboard__Keyboard {
  repeat_delay 300
    repeat_rate 40
    xkb_layout us
    xkb_variant altgr-intl
    xkb_options shift:both_capslock,caps:escape
    xkb_numlock enabled
}

input 2:7:SynPS/2_Synaptics_TouchPad {
  accel_profile adaptive
  click_method clickfinger
  drag enabled
  drag_lock enabled
  scroll_method two_finger
  scroll_factor 1.0
  tap enabled
  tap_button_map lrm
}

seat * hide_cursor 5000

# nord
set $nord0 #2E3440
set $nord1 #3B4252
set $nord2 #434C5E
set $nord3 #4C566A
set $nord4 #D8DEE9
set $nord5 #E5E9F0
set $nord6 #ECEFF4
set $nord7 #8FBCBB
set $nord8 #88C0D0
set $nord9 #81A1C1
set $nord10 #5E81AC
set $nord11 #BF616A
set $nord12 #D08770
set $nord13 #EBCB8B
set $nord14 #A3BE8C
set $nord15 #B48EAD
set $nord16 #6090a4

# class                 border  backgr. text    indicator child_border
client.focused          $nord16 $nord3  $nord6  $nord8    $nord16
client.focused_inactive $nord0  $nord0  $nord8  $nord9    $nord0
client.unfocused        $nord0  $nord0  $nord8  $nord9    $nord0
client.urgent           $nord11 $nord11 $nord6  $nord11   $nord11
client.placeholder	$nord0  $nord0  $nord6  $nord0    $nord0
client.background	$nord0

bar {
  swaybar_command waybar
}

# #---Basic Bindings---# #
bindsym $mod+Return 		exec $term
bindsym $mod+Shift+Return	exec --no-startup-id samedir

bindsym $mod+Shift+space 	floating toggle
bindsym $mod+space		focus mode_toggle

bindsym $mod+BackSpace          reload

#bindsym $mod+grave		exec --no-startup-id dmenuunicode

# Autotiling automatically sets splith and splitv.
# Because of this the layout only changes for the selected window and not for all windows if no layout is set, which is default in sway.
# To restore the "original behaviour", the layout needs to be reset before changing it.
# "Move"ing the windows first, resets the layout.
## Modify // Window Layout stacking
bindsym $mod+s move left; move right; layout stacking
## Modify // Window Layout tabbed
bindsym $mod+w move left; move right; layout tabbed
## Modify // Window Layout toggle split
bindsym $mod+e move left; move right; layout toggle split

# focus the parent container
bindsym $mod+Escape focus parent

# focus the child container
bindsym $mod+Shift+Escape focus child

bindsym $mod+o			sticky toggle

# #---Letter Key Bindings---# #
bindsym $mod+q			kill
bindsym $mod+Shift+q		kill

bindsym $mod+t			split toggle
bindsym $mod+apostrophe		split horizontal ;; exec $term
bindsym $mod+slash		split vertical ;; exec $term

bindsym $mod+Shift+y		exec --no-startup-id i3resize left
bindsym $mod+Shift+u		exec --no-startup-id i3resize down
bindsym $mod+Shift+i		exec --no-startup-id i3resize up
bindsym $mod+Shift+o		exec --no-startup-id i3resize right

## Resize // Enter Resize Mode // <> r ##
mode "Resize Mode" {
    ## Resize // Resize Window // ↑ ↓ ← → ##
    bindsym Left resize shrink width 10px
    bindsym h resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym j resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym k resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym l resize grow width 10px

    ## Resize // Exit Resize Mode // Escape or Enter ##
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "Resize Mode"

bindsym $mod+a			exec --no-startup-id ddspawn dropdowncalc

# gaps
bindsym $mod+Shift+backslash		gaps inner current set 15; gaps outer current set 15
bindsym $mod+backslash		gaps inner current set 0; gaps outer current set 0
bindsym $mod+bracketleft			gaps inner current plus 5
bindsym $mod+Shift+bracketleft		gaps inner current minus 5
bindsym $mod+bracketright			gaps outer current plus 5
bindsym $mod+Shift+bracketright		gaps outer current minus 5

bindsym $mod+d			 exec --no-startup-id rofi -show drun
bindsym $mod+Shift+d exec --no-startup-id rofi -show filebrowser

bindsym $mod+f			fullscreen toggle

bindsym $mod+g			workspace prev

bindsym $mod+h			focus left
bindsym $mod+Shift+h		move left 30

bindsym $mod+j			focus down
bindsym $mod+Shift+j		move down 30

bindsym $mod+k			focus up
bindsym $mod+Shift+k		move up 30

bindsym $mod+l			focus right
bindsym $mod+Shift+l		move right 30

bindsym $mod+Shift+x		exec --no-startup-id lockscreen

bindsym $mod+b			    exec killall -SIGUSR1 waybar
bindsym $mod+Shift+b		exec killall -SIGUSR2 waybar

#bindsym $mod+n		floating toggle; sticky toggle; resize set 640 360; move position 0 700
#bindsym $mod+Shift+n		floating toggle; sticky toggle; resize set 640 360; move position 1280 700

# #---Workspace Bindings---# #
bindsym $mod+Prior		workspace prev
bindsym $mod+Shift+Prior	move container to workspace prev
bindsym $mod+Next		workspace next
bindsym $mod+Shift+Next		move container to workspace next
bindsym $mod+Tab		workspace back_and_forth

set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# switch to workspace
bindsym $mod+1		workspace $ws1
bindsym $mod+2		workspace $ws2
bindsym $mod+3		workspace $ws3
bindsym $mod+4		workspace $ws4
bindsym $mod+5		workspace $ws5
bindsym $mod+6		workspace $ws6
bindsym $mod+7		workspace $ws7
bindsym $mod+8		workspace $ws8
bindsym $mod+9		workspace $ws9
bindsym $mod+0		workspace $ws10

# move focused container to workspace
bindsym $mod+Shift+1	move container to workspace $ws1
bindsym $mod+Shift+2	move container to workspace $ws2
bindsym $mod+Shift+3	move container to workspace $ws3
bindsym $mod+Shift+4	move container to workspace $ws4
bindsym $mod+Shift+5	move container to workspace $ws5
bindsym $mod+Shift+6	move container to workspace $ws6
bindsym $mod+Shift+7	move container to workspace $ws7
bindsym $mod+Shift+8	move container to workspace $ws8
bindsym $mod+Shift+9	move container to workspace $ws9
bindsym $mod+Shift+0	move container to workspace $ws10

for_window [class="Pinentry"] sticky enable
for_window [class="sent"] border pixel 0px
for_window [window_role="GtkFileChooserDialog"] resize shrink height 10 px
for_window [title="Default - Wine desktop"] floating enable
#for_window [title="Firefox - Sharing Indicator"] floating enable; border pixel 0px; resize set 75 -26; move position 1298 0
for_window [app_id="firefox" title="Firefox – Sharing Indicator"] floating enable, kill
for_window [app_id="firefox" title="Firefox — Sharing Indicator"] floating enable, kill
for_window [app_id="firefox" title="Picture-in-Picture"] floating enable
for_window [app_id="firefox" title="About Mozilla Firefox"] floating enable
# Jetbrains popup float fixes
for_window [class="jetbrains-(.*)" title="Go to Line/Column"] floating enable
for_window [class="jetbrains-(.*)" title="Rename"] floating enable
for_window [class="jetbrains-(.*)" title="Open Project"] floating enable

assign [app_id="firefox"] $ws1
assign [class="Mattermost"] $ws2
assign [app_id="telegramdesktop"] $ws2
assign [app_id="thunderbird"] $ws3

# Bindings to make the webcam float and stick.
for_window [title="mpvfloat"] floating enable
for_window [title="mpvfloat"] sticky enable
for_window [title="mpvfloat"] border pixel 0
no_focus [title="mpvfloat"]

# #---Function Buttons---# #
bindsym $mod+F9		exec --no-startup-id dmenumount
bindsym $mod+F10	exec --no-startup-id dmenuumount

# #---Arrow Keys---# #
bindsym $mod+Left		focus left
bindsym $mod+Down		focus down
bindsym $mod+Up			focus up
bindsym $mod+Right 		focus right
bindsym $mod+Shift+Left		move left
bindsym $mod+Shift+Down		move down
bindsym $mod+Shift+Up		move up
bindsym $mod+Shift+Right 	move right

# For screenshots and recording
bindsym --locked Print 	exec grimshot save output - | swappy -f -
bindsym Shift+Print     exec grimshot save area - | swappy -f -
bindsym Alt+Print 		  exec grimshot save window - | swappy -f -
bindsym Alt+Shift+Print exec grimshot save screen - | swappy -f -

# #---Extra XF86 Keys---# #
# These are the extra media keys that some keyboards have.
bindsym --locked XF86AudioMute		exec --no-startup-id lmc mute
bindsym --locked XF86AudioLowerVolume	exec --no-startup-id lmc down 5
bindsym --locked Shift+XF86AudioLowerVolume	exec --no-startup-id lmc down 10
bindsym --locked Control+XF86AudioLowerVolume	exec --no-startup-id lmc down 1
bindsym --locked XF86AudioRaiseVolume	exec --no-startup-id lmc up 5
bindsym --locked Shift+XF86AudioRaiseVolume	exec --no-startup-id lmc up 10
bindsym --locked Control+XF86AudioRaiseVolume	exec --no-startup-id lmc up 1
bindsym --locked XF86AudioNext		exec --no-startup-id lmc next
bindsym --locked XF86AudioPlay		exec --no-startup-id lmc toggle
bindsym --locked XF86AudioPrev		exec --no-startup-id lmc prev
bindsym --locked XF86AudioStop		exec --no-startup-id lmc toggle
bindsym --locked XF86AudioRewind		exec --no-startup-id lmc back 10
bindsym --locked XF86AudioForward	exec --no-startup-id lmc forward 10
#bindsym --locked XF86AudioMicMute	exec $micmute
bindsym --locked XF86MonBrightnessDown	exec --no-startup-id sudo light -U 5
bindsym --locked XF86MonBrightnessUp	exec --no-startup-id sudo light -A 5

# exec_always /home/kevinard/.config/sway/import-gsettings \
#    gtk-theme:gtk-theme-name \
#    icon-theme:gtk-icon-theme-name \
#    cursor-theme:gtk-cursor-theme-name
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec hash dbus-update-activation-environment 2>/dev/null && \
     dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK

exec_always --no-startup-id autotiling &
exec --no-startup-id kanshi &
exec --no-startup-id $BROWSER &
exec --no-startup-id thunderbird &
exec --no-startup-id telegram-desktop &

bindsym $mod+p focus output right
bindsym $mod+Shift+p move container to output right
